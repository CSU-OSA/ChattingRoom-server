# API说明文档

本文档主要列举了当前服务端支持的API，以及它们的详细使用说明与样例（待添加）。

- [API说明文档](#api说明文档)
    - [API总览](#api总览)
    - [API说明](#api说明)
        - [用户相关API](#用户相关api)
            - [登出（LOGOUT）](#登出logout)
            - [心跳包（HEARTBEAT）](#心跳包heartbeat)
        - [频道相关API](#频道相关api)
            - [加入频道（JOIN_CHA）](#加入频道join_cha)
            - [退出频道（QUIT_CHA）](#退出频道quit_cha)
            - [创建频道（CREATE_CHA）](#创建频道create_cha)
        - [消息相关API](#消息相关api)
            - [发送消息（SEND_MSG）](#发送消息send_msg)
            - [推送消息（PUSH_MSG）（服务端）](#推送消息push_msg服务端)
        - [系统相关API](#系统相关api)
            - [系统反馈（RESULT）](#系统反馈result)
        - [推送相关API](#推送相关api)
            - [推送频道列表（GET_CHA_LIST）](#推送频道列表get_cha_list)
            - [推送成员列表（GET_MEMBER_LIST）](#推送成员列表get_member_list)
            - [推送系统信息（GET_SYS_INFO）](#推送系统信息get_sys_info)

## API总览

**注：** 图中暗黄色的API为服务端用。

![](./DocRes/API_List.png)

## API说明

### 用户相关API

**注：** 没有登入API，因为Socket创建时就相当于用户登入了。

#### 登出（LOGOUT）

该信息发送给服务端后，服务端将视用户为正常登出，自动断开与用户的Socket链接并清除该用户的相关信息。

#### 心跳包（HEARTBEAT）

该信息发送给服务端将用于更新Socket可用性。

### 频道相关API

#### 加入频道（JOIN_CHA）

用户通过该API告知服务器将其加入某频道，服务器之后将自动向用户推送频道内消息。  
使用该API时，用户应向服务器提供`要加入的频道名` `加入频道时要使用的昵称` `要加入的频道的验证信息（如果有）`

#### 退出频道（QUIT_CHA）

用户通过该API告知服务器退出某频道，服务器之后将停止向用户推送频道内消息。  
使用该API时，用户应向服务器提供`要退出的频道名`

#### 创建频道（CREATE_CHA）

用户通过该API告知服务器创建某频道，服务器之后将创建一个频道，并自动将用户加入该频道。  
使用该API时，用户应向服务器提供`要创建的频道名` `加入频道时要使用的昵称` `要创建的频道的验证信息（如果有）`

### 消息相关API

#### 发送消息（SEND_MSG）

用户通过该API告知服务器向某一频道发送消息，服务器之后会将消息推送到该频道的所有成员的客户端。
使用该API时，用户应向服务器提供`要发送消息的频道名` `消息类型` `消息内容` `消息发送时间戳`

#### 推送消息（PUSH_MSG）（服务端）

服务端通过该API向用户推送消息。
使用该API时，服务器会向用户提供`推送的消息的频道名` `消息发送者的昵称` `消息类型` `消息内容` `消息发送时间戳`

### 系统相关API

#### 系统反馈（RESULT）

服务端通过该API向用户反馈信息。
使用该API时，服务器会向用户提供`状态码` `反馈内容`

### 推送相关API

#### 推送频道列表（GET_CHA_LIST）

服务端通过该API向客户端推送频道列表
使用该API时，服务器会向用户提供`频道名` `是否已加入该频道` `该频道是否公开` `频道内成员数量`

#### 推送成员列表（GET_MEMBER_LIST）

服务端通过该API向客户端推送频道的成员列表
使用该API时，服务器会向用户提供`频道名` `成员昵称`

#### 推送系统信息（GET_SYS_INFO）

服务端通过该API向客户端推送聊天室系统的系统信息
使用该API时，服务器会向用户提供`系统版本号` `单向Ping值`